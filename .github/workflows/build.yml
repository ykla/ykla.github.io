name: ğŸ”— æ„å»º pkgbase

on: 
    workflow_dispatch:
  
# è®¾ç½® GITHUB_TOKEN çš„æƒé™ï¼Œä»¥å…è®¸éƒ¨ç½²åˆ° GitHub Pages
permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  # æ„å»ºå·¥ä½œ
  build:
    runs-on: ubuntu-latest
    steps:
      - name: æŸ¥çœ‹é…ç½®
        run: |
           date 
           uname -r
           free -hg
           pwd
      - name: Checkout
        uses: actions/checkout@v6
        with:
          fetch-depth: 0 # lastUpdated éœ€è¦
      - name: Build inside FreeBSD VM
        uses: vmactions/freebsd-vm@v1.3.8
        with:
          release: "15.0"
          arch: x86_64
          sync-time: true
          mem: 12288
          run: |
            pkg update -f 
            ls -l /home/runner/work/
            ls -l /home/runner/work/ykla.github.io/ykla.github.io/
            pwd
            pkg ins -y git
            cd /usr/src
            git clone --depth=1 https://github.com/freebsd/freebsd-src.git /usr/src
            make -j8 buildworld && make -j8 buildkernel && make -j8 packages
            ls -l
            ls -l /usr/obj/usr/src/repo
            du -hs /usr/obj/usr/src/repo
            cp -a /usr/obj/usr/src/repo/* /home/runner/work/ykla.github.io/ykla.github.io

      - name: å¤åˆ¶é¦–é¡µ
        run:  |
          ls -al /home/runner/work/ykla.github.io/ykla.github.io
          pwd
          
        
