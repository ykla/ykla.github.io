import{_ as a,r as t,o as r,c as o,a as e,b as i,d as s,e as d}from"./app.69650211.js";const l={},c=e("h1",{id:"_2-7-common-software-and-ssh-configuration",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2-7-common-software-and-ssh-configuration","aria-hidden":"true"},"#"),s(" 2.7 Common Software and SSH Configuration")],-1),h=e("h2",{id:"winscp-download",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#winscp-download","aria-hidden":"true"},"#"),s(" WinSCP Download")],-1),u=e("p",null,[s("WinSCP is a graphical wrapper for the "),e("code",null,"scp"),s(" command, and supports various protocols such as FTP. It can be used to transfer files between Windows and Linux or BSD in a fast way.")],-1),v=e("p",null,"Download at",-1),p={href:"https://winscp.net/eng/download.php",target:"_blank",rel:"noopener noreferrer"},m=s("https://winscp.net/eng/download.php"),g=e("h2",{id:"xshell-download",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#xshell-download","aria-hidden":"true"},"#"),s(" Xshell Download")],-1),b=e("p",null,"Xshell is a powerful shell tool for Windows platforms, not recommended to use the putty of the misery philosophy.",-1),f=e("p",null,"Download (just enter your username and email) at",-1),x={href:"https://www.xshell.com/en/free-for-home-school/",target:"_blank",rel:"noopener noreferrer"},w=s("https://www.netsarang.com/en/free-for-home-school"),y=d(`<h2 id="configure-ssh" tabindex="-1"><a class="header-anchor" href="#configure-ssh" aria-hidden="true">#</a> Configure SSH</h2><h3 id="allow-root-ssh" tabindex="-1"><a class="header-anchor" href="#allow-root-ssh" aria-hidden="true">#</a> Allow root ssh</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># ee /etc/ssh/sshd_config # (delete the previous # and change yes or no to the following)
PermitRootLogin yes # Allow root login 
PasswordAuthentication yes # (optional) set whether to use normal password authentication, if not set this parameter to use PAM authentication login, more secure
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Hint: What does it mean to delete the previous <code>#</code>? <code>#</code> is generally used as a comment in UNIX, equivalent to <code>//</code> in C language. It means that the text after it is only descriptive and has no practical effect.</p></blockquote><h3 id="turn-on-ssh-service" tabindex="-1"><a class="header-anchor" href="#turn-on-ssh-service" aria-hidden="true">#</a> Turn on SSH service</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># service sshd restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>If <code>sshd</code> is not found, please execute the next command:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># sysrc sshd_enable=&quot;YES&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>and then</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># service sshd restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="keep-ssh-online" tabindex="-1"><a class="header-anchor" href="#keep-ssh-online" aria-hidden="true">#</a> Keep SSH online</h3><p>Server-side settings.</p><p>Edit <code># ee /etc/ssh/sshd_config</code> and adjust the \`\`ClientAlive\` settings.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ClientAliveInterval 10
ClientAliveCountMax 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>If the client does not respond 3 times, the client is considered disconnected.</p><p><code>ClientAliveInterval</code> defaults to <code>0</code>, which means that detection is disabled.</p><p>Client settings.</p><p><code># ee /etc/ssh/ssh_config</code> for global users, <code>~/.ssh/config</code> for current users only.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Host *
ServerAliveInterval 10
ServerAliveCountMax 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Or, when connecting, use <code>-o</code> to specify the following parameters.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># ssh user@server-ip -p 22 -o ServerAliveInterval=10 -o ServerAliveCountMax=3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Just turn on detection on either the client or server side.</p><h2 id="ssh-key-login" tabindex="-1"><a class="header-anchor" href="#ssh-key-login" aria-hidden="true">#</a> SSH key login</h2><h3 id="generate-the-key" tabindex="-1"><a class="header-anchor" href="#generate-the-key" aria-hidden="true">#</a> Generate the key</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>## ssh-keygen
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>OpenSSH 7.0 and above disables the ssh-dss (DSA) public key algorithm by default. FreeBSD 13.0 uses OpenSSH_7.9. so just use the default.</p></blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>root@ykla:~ # ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa): # Enter here
Created directory &#39;/root/.ssh&#39;.
Enter passphrase (empty for no passphrase): #Enter password here (password is recommended for security)
Enter same passphrase again: #Repeat password here
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:MccEjGhWCv6P/8y62JfbpEws9OnRN1W0adxmpceNny8 root@ykla
The key&#39;s randomart image is:
+---[RSA 2048]----+
|.  o.o...      ... |o.o....
|... +... ...      o+*|
+...     .     o*B|
| .    .      o=. |o=.
| . . o S . ... |.
+ o+o .   . |.
| . o *.o o E . |.
+ Bo= . .  . |.
| . ==O..       | .
+----[SHA256]-----+
root@ykla:~ # 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="configure-the-key" tabindex="-1"><a class="header-anchor" href="#configure-the-key" aria-hidden="true">#</a> Configure the key</h3><p>Check the permissions (the default created permissions are as follows)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>drwx------ 2 root wheel 512 Mar 22 18:27 /root/.ssh # Permissions are 700
-rw------- 1 root wheel 1856 Mar 22 18:27 /root/.ssh/id_rsa #private key with permissions of 600
-rw-r--r-- 1 root wheel 391 Mar 22 18:27 /root/.ssh/id_rsa.pub #public key with permissions 644
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Generate the authentication public key.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># cat /root/.ssh/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys
-rw-r--r-- 1 root wheel 391 Mar 22 18:39 /root/.ssh/authorized_keys # check permissions 644
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>After saving the private and public keys locally using winscp, delete the extra files on the server:.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># rm /root/.ssh/id_rsa*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="modify-etc-ssh-sshd-config" tabindex="-1"><a class="header-anchor" href="#modify-etc-ssh-sshd-config" aria-hidden="true">#</a> Modify /etc/ssh/sshd_config</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># ee /etc/ssh/sshd_config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Modify the configuration as follows (remove the leading # and change yes or no to the following)</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>PermitRootLogin yes # Allow ROOT users to log in directly to the system
AuthorizedKeysFile .ssh/authorized_keys #Modify to use the key file in the user directory, the default has been configured correctly, please check
PasswordAuthentication no #Do not allow users to log in with password
ChallengeResponseAuthentication no #Disable password authentication
PermitEmptyPasswords no #Disable login for users with empty passwords
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="restart-the-service" tabindex="-1"><a class="header-anchor" href="#restart-the-service" aria-hidden="true">#</a> Restart the service</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># service sshd restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Use xshell to login, enter the key password, import the private key <code>id_rsa</code>, and you can login.</p><blockquote><p>If you can&#39;t login with other ssh software, please convert the key format by yourself.</p></blockquote>`,42);function _(k,S){const n=t("ExternalLinkIcon");return r(),o("div",null,[c,h,u,v,e("p",null,[e("a",p,[m,i(n)])]),g,b,f,e("p",null,[e("a",x,[w,i(n)])]),y])}var C=a(l,[["render",_],["__file","2.7-common-software-and-ssh-configuration.html.vue"]]);export{C as default};
