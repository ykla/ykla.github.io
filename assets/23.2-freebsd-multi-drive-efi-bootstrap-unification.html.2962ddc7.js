import{_ as e,o as t,c as o,e as i}from"./app.78907f2c.js";const n={},d=i('<h1 id="_23-2-freebsd-multi-drive-efi-bootstrap-unification" tabindex="-1"><a class="header-anchor" href="#_23-2-freebsd-multi-drive-efi-bootstrap-unification" aria-hidden="true">#</a> 23.2 FreeBSD Multi-Drive EFI Bootstrap Unification</h1><p>What does multi-drive EFI unification mean? It means that there are two hard disks with EFI partitions on each of them, one with FreeBSD in it and the other with Windows.</p><p>Now I want to keep only one partition, i.e. I want to put the EFI configuration files into the EFI partition of one hard disk and unify it.</p><p>Let the drive with Windows be <code>ada0</code> and the FreeBSD drive be <code>nvd0</code>.</p><p>First, turn off the Windows fastboot: the command is <code>powercfg /h off</code>.</p><p>Then shutdown and reboot into FreeBSD and create a mount point <code>mkdir /mnt/efi</code>. Check if <code>ada0p1</code> (the first partition of the drive) is the EFI partition we want to mount by entering the command <code>fstyp /dev/ada0p1</code>, my output is NTFS, so it is not the EFI partition we want.</p><p><code>fstyp /dev/ada0p2</code>, the output is <code>msdosfs</code>, which is the EFI partition on our Windows disk.</p><p>Next mount the EFI partition on disk ada0 to <code>/mnt/efi</code> in FreeBSD: <code># mount -t msdosfs /dev/ada0p2 /mnt/efi</code></p><p>Create a directory under the EFI path for FreeBSD bootability: <code># mkdir /mnt/efi/EFI/freeb</code>sd</p><p>Then copy the boot file to that path <code># cp /boot/boot1.efi /mnt/efi/EFI/freebsd/bootx64.efi</code></p><p>Finally generate the boot entry: <code># efibootmgr -c -l /mnt/efi/EFI/freebsd/bootx64.efi -L &quot;FreeBSD niu pi&quot;</code></p><p>Just reboot into Windows and use easyuefi to activate the <code>FreeBSD niu pi</code> boot entry. If there is no problem, you can use DiskGenius to delete the EFI partition file from the nvd0 disk.</p>',12),a=[d];function r(s,c){return t(),o("div",null,a)}var f=e(n,[["render",r],["__file","23.2-freebsd-multi-drive-efi-bootstrap-unification.html.vue"]]);export{f as default};
