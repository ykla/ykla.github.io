import{_ as d,r as n,o,c as s,a,b as r,e as t,d as e}from"./app.614c5d6a.js";const c={},l=t('<h1 id="_26-2-configuration" tabindex="-1"><a class="header-anchor" href="#_26-2-configuration" aria-hidden="true">#</a> 26.2 Configuration</h1><h2 id="initial-login" tabindex="-1"><a class="header-anchor" href="#initial-login" aria-hidden="true">#</a> Initial login</h2><h3 id="obtaining-drivers" tabindex="-1"><a class="header-anchor" href="#obtaining-drivers" aria-hidden="true">#</a> Obtaining drivers</h3><p>The first time you enter the system, OpenBSD will automatically detect the wireless, graphics and sound cards and download the relevant drivers. Wait a few minutes for them to update themselves. If you are waiting too long, you can <code>Ctrl</code> + <code>C</code> to cancel and run <code># fw_update</code> to retrieve the drivers after you enter the system, as foreign sites are slow to connect.</p>',4),h=e("In the new version 7.1, there is a change that the driver download will encounter a timeout error (GFW). In this case, after running "),u=a("code",null,"fw_update",-1),m=e(", remember the name of the failed driver and then visit the "),p={href:"http://firmware.openbsd.org/firmware/7.1/",target:"_blank",rel:"noopener noreferrer"},f=e("official driver site"),v=e(" directly to get it manually. Unzip the driver package, copy the internal driver files to the "),g=a("code",null,"/etc/firmware/",-1),b=e(" folder, and reboot."),w=t(`<p>For example, <code>inteldrm-firmware-xxx.tgz</code> is the driver for Intel&#39;s graphics card. After extracting this driver, you will find the directory of i915 under the driver firmware directory. The following operation can be performed (operation requires permission).</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd /etc/firmware/
mkdir i915
cp -r /$PATH/inteldrm-firmware-xxx/firmware/i915/* /etc/firmware/i915/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Similarly <code>amdgpu-firmware-xxx.tgz</code> is amd&#39;s graphics card driver, after extracting the driver, you will find the directory of amdgpu in the driver firmware directory. The following operation can be performed (operation requires permission).</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd /etc/firmware/
mkdir amdgpu
cp -r /$PATH/amdgpu-firmware-xxx/firmware/amdgpu/* /etc/firmware/amdgpu/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Other drivers are the same as this.</p><h3 id="desktop-support-please-ignore-this-item-for-newer-versions" tabindex="-1"><a class="header-anchor" href="#desktop-support-please-ignore-this-item-for-newer-versions" aria-hidden="true">#</a> Desktop support (Please ignore this item for newer versions)</h3><p>When installing older versions, you may encounter the option to enable X or not. If it was accidentally blocked, we can turn it back on. Open <code>/etc/sysctl.conf</code> and add the line <code>machdep.allowaperture=2</code>.</p><h3 id="modify-software-sources" tabindex="-1"><a class="header-anchor" href="#modify-software-sources" aria-hidden="true">#</a> Modify software sources</h3>`,8),x=e("Open "),_=a("code",null,"/etc/installurl",-1),k=e(" and comment out the default source and change it to "),y=a("code",null,"https://mirrors.bfsu.edu.cn/OpenBSD",-1),S=e(". Here we have chosen the Northwestern source, users can also choose "),O={href:"https://mirrors.tuna.tsinghua.edu.cn/OpenBSD",target:"_blank",rel:"noopener noreferrer"},D=e("Tsinghua mirror source"),B=e(", "),U={href:"https://mirrors.aliyun.com/openbsd",target:"_blank",rel:"noopener noreferrer"},E=e("Ali mirror source"),$=e(", and [Nanjing University source](https: //mirror.sjtu.edu.cn/OpenBSD), etc."),I=t(`<h2 id="system-updates" tabindex="-1"><a class="header-anchor" href="#system-updates" aria-hidden="true">#</a> System updates</h2><h3 id="obtaining-privileges-with-a-regular-account" tabindex="-1"><a class="header-anchor" href="#obtaining-privileges-with-a-regular-account" aria-hidden="true">#</a> Obtaining privileges with a regular account</h3><p>Log in as root, create a new <code>/etc/doas.conf</code>, open <code>doas.conf</code>, add a line <code>permit persist :wheel</code></p><h3 id="kernel-update" tabindex="-1"><a class="header-anchor" href="#kernel-update" aria-hidden="true">#</a> kernel update</h3><p>Kernel update: <code># syspatch</code></p><p>Driver update: <code># fw_update</code></p><p>Software update: <code># pkg_add -u</code></p><p>Modify shell: <code>chsh</code></p><p>Example: <code># chsh -s /usr/local/bin/bash $USER</code></p><h2 id="software-management" tabindex="-1"><a class="header-anchor" href="#software-management" aria-hidden="true">#</a> Software management</h2><ul><li><p>Find software: <code># pkg_info -Q foo</code></p></li><li><p>Install software: <code># pkg_add foo</code></p></li><li><p>Upgrade software: <code># pkg_add -iu foo</code></p></li></ul><h2 id="mount-removable-disks" tabindex="-1"><a class="header-anchor" href="#mount-removable-disks" aria-hidden="true">#</a> Mount removable disks</h2><h3 id="create-a-new-mount-point" tabindex="-1"><a class="header-anchor" href="#create-a-new-mount-point" aria-hidden="true">#</a> Create a new mount point</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ cd ~
$ mkdir media
$ cd media
# # mkdir usb1 usb2 usb3 usb4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="view-disk-letter" tabindex="-1"><a class="header-anchor" href="#view-disk-letter" aria-hidden="true">#</a> View disk letter</h3><p>Use the <code>dmesg</code> command to check the drive letter of a newly inserted drive, e.g. a USB drive formatted as fat32 may have the drive letter <code>sd1</code> on an OpenBSD system.</p><h3 id="check-the-partition" tabindex="-1"><a class="header-anchor" href="#check-the-partition" aria-hidden="true">#</a> Check the partition</h3><p>If the inserted disk is <code>sd1</code>, type <code>disklabel sd1</code> to check the partition status. As follows</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># size offset fstype [fsize bsize cpg]
 c: 60062500 0 unused                    
 i: 60062244 256 MSDOS    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mount" tabindex="-1"><a class="header-anchor" href="#mount" aria-hidden="true">#</a> mount</h3><p>The partition <code>i</code> can be mounted using the following command.</p><p><code># mount /dev/sd1i /$USER/media/usb1</code>, with <code>$USER</code> replaced by the current user name.</p><h3 id="other-formats" tabindex="-1"><a class="header-anchor" href="#other-formats" aria-hidden="true">#</a> Other formats</h3><p>OpenBSD can mount external hard disk formats such as NTFS (requires package <code>ntfs_3g</code>), ext2/ext3, and CD disks with the following commands.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># mount /dev/sd3i /$USER/media/usb1 # fat32
# mount_ntfs /dev/sd2k /$USER/media/usb2 # NTFS
# mount /dev/sd1l /$USER/media/usb3 # ext2/ext3
# mount /dev/cd0a /$USER/media/usb4 # CD
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="unmount-the-disk" tabindex="-1"><a class="header-anchor" href="#unmount-the-disk" aria-hidden="true">#</a> Unmount the disk</h3><p><code># umount /$USER/media/usb1</code></p><h2 id="wireless-test" tabindex="-1"><a class="header-anchor" href="#wireless-test" aria-hidden="true">#</a> Wireless test</h2><p>For wireless networks in OpenBSD, the configuration file is usually <code>hostname.if</code>, where <code>if</code> is the wireless driver name + serial number. For example, if the wireless model of a laptop is rtl8188cu, the driver under OpenBSD is rtwn, and the serial number starts from 0. To make the system load wireless automatically, open the <code>/etc/hostname.rtwn0</code> file, and add</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dhcp 
join wireless name wpakey wireless password
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Save it and you are done.</p><h2 id="addendum" tabindex="-1"><a class="header-anchor" href="#addendum" aria-hidden="true">#</a> Addendum</h2><h3 id="load-touchpad" tabindex="-1"><a class="header-anchor" href="#load-touchpad" aria-hidden="true">#</a> Load touchpad</h3><p>Open <code>/etc/wsconsctl.conf</code>, add a line <code>mouse.tp.tapping=1</code>.</p><h3 id="load-multithreading" tabindex="-1"><a class="header-anchor" href="#load-multithreading" aria-hidden="true">#</a> Load multithreading</h3><p>Open <code>/etc/sysctl.conf</code>, add a line <code>hw.smt=1</code> .</p><h3 id="related-material" tabindex="-1"><a class="header-anchor" href="#related-material" aria-hidden="true">#</a> Related material</h3><ul><li><p>OpenBSD FAQ Recommendations</p></li><li><p>Absolute OpenBSD Supplement</p></li></ul><p><em>If you think Firefox is slow, try Epiphany (Gnome browser).</em></p>`,39);function T(R,C){const i=n("ExternalLinkIcon");return o(),s("div",null,[l,a("p",null,[h,u,m,a("a",p,[f,r(i)]),v,g,b]),w,a("p",null,[x,_,k,y,S,a("a",O,[D,r(i)]),B,a("a",U,[E,r(i)]),$]),I])}var A=d(c,[["render",T],["__file","26.2-configuration.html.vue"]]);export{A as default};
