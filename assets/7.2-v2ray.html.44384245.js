import{_ as e,o as t,c as o,e as n}from"./app.3e49afea.js";const r={},i=n(`<h1 id="_7-2-v2ray" tabindex="-1"><a class="header-anchor" href="#_7-2-v2ray" aria-hidden="true">#</a> 7.2 V2ray</h1><h2 id="install-v2ray" tabindex="-1"><a class="header-anchor" href="#install-v2ray" aria-hidden="true">#</a> Install v2ray</h2><p>Execute the command:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># pkg install v2ray
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>You can also install xray-core by running:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># pkg install xray-core
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The configuration of these two agents is basically the same, and the configuration documentation can be found in their respective official documentation. xray can be fully referenced from v2ray&#39;s configuration method.</p><h2 id="start-the-software" tabindex="-1"><a class="header-anchor" href="#start-the-software" aria-hidden="true">#</a> Start the software</h2><p>If you have a proxy client beforehand, you can export the configuration of the client node and copy it to FreeBSD, assuming the exported file name is <code>config.json</code> and then execute:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ v2ray -c config.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>If you use xray-core, you can execute:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ xray -c config.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The software should start successfully at this time.</p><h2 id="configure-the-software-agent" tabindex="-1"><a class="header-anchor" href="#configure-the-software-agent" aria-hidden="true">#</a> Configure the software agent</h2><p>This time you can open <code>config.json</code>, find the corresponding <code>inbounds</code> property, <code>inbounds</code> is an array, each element inside represents the inbound interface configuration, there are addresses and port numbers, proxy mode. In the need to proxy the internal software set to the corresponding address and port number here.</p><p>For example, one of the inbound interface <code>protocol</code> is <code>http</code>, <code>listen</code> is <code>127.0.0.1</code>, <code>port</code> is <code>10809</code>, if you need Firefox to go proxy here, you can find in the browser settings, network - proxy server, set http proxy address is set to <code>127.0.0.1</code>, the port is <code>10809</code>. 10809\`. Similarly, the socks proxy can also refer to this method.</p><p>Most software proxies are set in different ways. For desktop software, you need to set the corresponding proxy server by yourself. Terminal commands, if you need to go proxy is relatively simple. Most of the terminal commands look for <code>HTTP_PROXY</code>, <code>HTTPS_PROXY</code>, <code>ALL_PROXY</code>, three environment variables, according to the value of these three environment variables to set the corresponding proxy.</p><p>The following commands apply to sh, bash, and zsh:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ export HTTP_PROXY=&quot;http://127.0.0.1:10809&quot; # Set the http proxy
$ export HTTPS_PROXY=&quot;http://127.0.0.1:10809&quot;
$ export ALL_PROXY=&quot;socks5://127.0.0.1:10808&quot; # set socks proxy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After setting up, browse the web in Firefox and observe the v2ray output log, you can see that the browser traffic has gone through the proxy. Terminal commands also use proxy, but some commands set proxy according to environment variables, please find the corresponding software setting method.</p><h2 id="proxy-diversion" tabindex="-1"><a class="header-anchor" href="#proxy-diversion" aria-hidden="true">#</a> Proxy diversion</h2><p>There are some URLs that do not need to use a proxy server, such as inbound websites, local websites, etc. This requires a traffic diversion, part of the traffic needs to proxy, part of the traffic needs to go to the direct connection and so on.</p><p>Open config.json, find the corresponding routing property, there is a rules sub-property below, which is used to configure the traffic diversion method of v2ray. rules can be configured with different rules, each rule has an ip attribute, or domain attribute. If the ip or URL matches one of the rules, v2ray will forward the traffic to the corresponding outbounds according to the outboundTag property, for example, outbonds with tags proxy, direct, block. So you can just write the IP address you want to divert to the corresponding rule. See the corresponding v2ray documentation here. In fact, when exporting the configuration file on the v2ray client, the corresponding shunting rules are also exported by default.</p><p>v2ray has also given <code>geosite.dat</code> and <code>geoip.dat</code>, two resource files, <code>geosite.dat</code> which saves the URLs by category, and <code>geoip.dat</code> which saves the IPs by category. v2ray can automatically find the <code>geosite.dat</code> and <code>geosite.ip</code> files under the path. For xray, this <code>XRAY_LOCATION_ASSET</code> environment variable is used to set the resource path.</p><p>For example, the following direct link rule sets the direct link to the cn URL in geosite:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>      {
        &quot;domain&quot;: [
          &quot;geosite:cn&quot;
        ],
        &quot;outboundTag&quot;: &quot;direct&quot;,
        &quot;type&quot;: &quot;field&quot;
      },
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>v2ray community to the cn site directly connected to the URL is not quite complete, classification is also relatively small, you can find the community on github to organize the geosite, geoip file, which also details the whitelist configuration mode, blacklist configuration mode.</p>`,27),a=[i];function s(d,c){return t(),o("div",null,a)}var h=e(r,[["render",s],["__file","7.2-v2ray.html.vue"]]);export{h as default};
