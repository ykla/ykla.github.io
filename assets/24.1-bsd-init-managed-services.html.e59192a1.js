import{_ as e,o as t,c as o,e as a}from"./app.5f102538.js";const i={},c=a(`<h1 id="_24-1-system-init-managed-services" tabindex="-1"><a class="header-anchor" href="#_24-1-system-init-managed-services" aria-hidden="true">#</a> 24.1 System INIT Managed Services</h1><h2 id="basics" tabindex="-1"><a class="header-anchor" href="#basics" aria-hidden="true">#</a> Basics</h2><p>FreeBSD uses the traditional BSD INIT to manage system services.</p><ul><li>To start a service: <code># service XXX start</code></li><li>Stop a service: <code># service XXX stop</code></li><li>Restarting a service: <code># service XXX restart</code></li></ul><p>For security reasons, the services are disabled by default after installation, so the above commands cannot be executed, and the services need to be turned on first: \`# service XXX restart</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># ee /etc/rc.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Add a line, <code>XXX_enable=&quot;YES&quot;</code>, <code>XXX</code> for the service name (this is just an example, it can actually be nginx, samba, etc.), this is a fixed format</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>XXX_enable=&quot;YES&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>You can also add it with the command</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sysrc XXX_enable=&quot;YES&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The path to the script for the service is: \`\`#/usr/local/etc/rc.d/\`</p><p>Of course, you can also call those scripts under <code>/etc/rc.d/</code> and <code>/usr/local/etc/rc.d/</code> directly.</p><ul><li><code># /usr/local/etc/rc.d/XXX reload</code></li><li><code># /usr/local/etc/rc.d/XXX stop</code></li></ul><p>If a service is not enabled in <code>rc.conf</code>, but you want to start it temporarily, then you can do this.</p><ul><li><code># service XXX onestart</code></li><li><code># service XXX onestop</code></li></ul><h2 id="advanced" tabindex="-1"><a class="header-anchor" href="#advanced" aria-hidden="true">#</a> Advanced</h2><p>rc.conf holds all system services. The files and paths associated with it are as follows.</p><ol><li>The default configuration is located at <code>/etc/defaults/rc.conf</code>. Try not to modify it. 2.</li><li>The user-defined configuration is located at <code>/etc/rc.conf</code>. For example, if you want the system to automatically start services such as ssh, ipfw, nginx, etc., you should modify this file. **Note that if there is a conflict between a configuration and the default configuration, this file will prevail. ** The base system&#39;s service scripts are located in the ***.</li><li>The service scripts of the base system are located in <code>/etc/rc.d/</code>. The service scripts for third-party applications are located at <code>/usr/local/etc/rc.d/</code>. When you encounter a problem, find out what the problem is by consulting the configuration file.</li></ol><h3 id="etc-rc-conf-common-configuration-files" tabindex="-1"><a class="header-anchor" href="#etc-rc-conf-common-configuration-files" aria-hidden="true">#</a> /etc/rc.conf Common configuration files</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>hostname=&quot;server.shuang.ca&quot; #set hostname
ifconfig_vtnet0=&quot;inet xxx.xxx.xxx.xxx netmask 255.255.255.0&quot; # Set the IP address, where vtnet0 is the name of the NIC, be careful to set it correctly
defaultrouter=&quot;xxx.xxx.xxx.1&quot; #gateway address
syslogd_enable=&quot;YES&quot; #Enable logging
syslogd_flags=&quot;-s -s&quot; #Disable receiving logs from other hosts
fsck_y_enable=&quot;YES&quot; #Automatically fsck hard disk on boot
enable_quotas=&quot;YES&quot;
check_quotas=&quot;YES&quot; #System quotas
clear_tmp_enable=&quot;YES&quot; #Automatically clear /tmp on boot
update_motd=&quot;NO&quot; #Disable kernel message prompt
icmp_drop_redirect=&quot;YES&quot;
icmp_log_redirect=&quot;YES&quot; #ICMP redirection
log_in_vain=&quot;YES&quot; #Log every attempted connection to a closed port
accounting_enable=&quot;YES&quot; #System audit function
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="periodic-conf" tabindex="-1"><a class="header-anchor" href="#periodic-conf" aria-hidden="true">#</a> periodic.conf</h2><p>By default, FreeBSD has a number of periodic tasks that are executed with the <code>periodic</code> command and are automatically invoked by <code>cron</code>. The configuration and paths associated with <code>periodic</code> are as follows.</p><ol><li>The default configuration is located at <code>/etc/defaults/periodic.conf</code>.</li><li>the user-defined configuration is located at <code>/etc/periodic.conf</code>. 3. the base system task scripts are located at <code>/etc/periodic.conf</code>.</li><li>the task scripts of the base system are located at <code>/etc/periodic/</code>. 4. the task scripts of third-party applications are located at <code>/etc/periodic/</code>. The task scripts for third-party applications are located at <code>/usr/local/etc/periodic/</code>.</li></ol><p>Take the path database <code>/var/db/locate.database</code>, on which the <code>locate</code> command depends, as an example.</p><p>This database is updated weekly by the script <code>/etc/periodic/weekly/310.locate</code>.</p><p>You can also run this script directly if you want to update it immediately.</p><h2 id="other-configuration-files" tabindex="-1"><a class="header-anchor" href="#other-configuration-files" aria-hidden="true">#</a> Other configuration files</h2><ul><li>crontab: <code>cron</code> configuration, located in <code>/etc/crontab</code>, please refer to <code>man crontab</code>.</li><li>syslog.conf: system logging configuration, located in <code>/etc/syslog.conf</code>, please refer to <code>man syslog.conf</code>.</li><li>loader.conf: System boot configuration, located in <code>/boot/loader.conf</code>, please refer to <code>man loader.conf</code>.</li><li>sysctl.conf: Kernel parameters configuration, located in <code>/etc/sysctl.conf</code>, please refer to <code>man sysctl.conf</code>.</li></ul>`,28),s=[c];function d(n,r){return t(),o("div",null,s)}var u=e(i,[["render",d],["__file","24.1-bsd-init-managed-services.html.vue"]]);export{u as default};
